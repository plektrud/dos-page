<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>DOS Style Webseite</title>
  <link href="https://fonts.cdnfonts.com/css/perfect-dos-vga-437" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
</head>
<body class="os">

  <div class="top-menu">
    <a href="#" data-section="datei">Datei</a>
    <a href="#" data-section="bearbeiten">Bearbeiten</a>
    <a href="#" data-section="ansicht">Ansicht</a>
    <a href="#" data-section="extras">Extras</a>
    <a href="#" data-section="hilfe">Hilfe</a>
  </div>

  <button id="hamburger-btn" aria-label="Menü öffnen" aria-expanded="false">&#xbb;</button>

  <div class="container">
    <nav class="side-content" id="side-menu"></nav>
    <main class="main-content" id="main-content"></main>
  </div>

  <div class="footer-menu">
    <div>Status: <span class="status">OK</span></div>
    <div>Benutzer: DOSUser</div>
    <div>Zeit: <span id="clock"></span></div>
  </div>

  <div class="custom-dos-cursor">±</div>

<script>
  // Cursor Positionierung
  const cursor = document.querySelector('.custom-dos-cursor');
  document.addEventListener('mousemove', e => {
    cursor.style.left = (e.pageX + 1) + 'px';
    cursor.style.top = (e.pageY + 2) + 'px';
  });

  // Cursor-Farbe bei Hover über Links
  document.body.addEventListener('mouseover', e => {
    if (e.target.tagName === 'A') {
      cursor.style.color = '#000000';  // Schwarz beim Hover
    }
  });
  document.body.addEventListener('mouseout', e => {
    if (e.target.tagName === 'A') {
      cursor.style.color = '#ffffff';  // Weiß normal
    }
  });

  // Uhr
  function updateClock() {
    const now = new Date();
    const date = now.toLocaleDateString('de-DE', { weekday: 'short', day: '2-digit', month: '2-digit', year: 'numeric' });
    const time = now.toLocaleTimeString('de-DE', { hour: '2-digit', minute: '2-digit', second: '2-digit' });
    document.getElementById('clock').textContent = date + ' ' + time;
  }
  setInterval(updateClock, 1000);
  updateClock();

  // Lade Side-Menu und Content per Fetch
  async function loadSection(name) {
    try {
      // Lade Menü HTML
      const menuResp = await fetch(`top-menu/${name}/menu.html`);
      if (!menuResp.ok) throw new Error('Menü nicht gefunden');
      const menuHTML = await menuResp.text();

      // Lade Content HTML
      const contentResp = await fetch(`top-menu/${name}/content.html`);
      if (!contentResp.ok) throw new Error('Content nicht gefunden');
      const contentHTML = await contentResp.text();

      // Setze Inhalte
      document.getElementById('side-menu').innerHTML = menuHTML;
      document.getElementById('main-content').innerHTML = contentHTML;

      // Maus-Cursor neu binden (wegen neuem Inhalt)
      bindCustomCursor();

    } catch (e) {
      console.error(e);
      document.getElementById('side-menu').textContent = 'Fehler beim Laden des Menüs';
      document.getElementById('main-content').textContent = 'Fehler beim Laden des Inhalts';
    }
  }

  // Menü-Links anklickbar machen (laden neuer Sektionen)
  document.querySelectorAll('.top-menu a').forEach(link => {
    link.addEventListener('click', e => {
      e.preventDefault();
      const section = link.dataset.section;
      loadSection(section);
    });
  });

  // Hamburger-Button
  const hamburger = document.getElementById('hamburger-btn');
  const sideMenu = document.getElementById('side-menu');
  hamburger.addEventListener('click', () => {
    const isOpen = sideMenu.classList.toggle('open');
    hamburger.setAttribute('aria-expanded', isOpen);
  });

  // Cursor-Funktion für dynamisch geladenen Inhalt (Side + Content)
  function bindCustomCursor() {
    // Cursor auf Links in Side und Main-Content
    document.querySelectorAll('#side-menu a, #main-content a').forEach(link => {
      link.addEventListener('mouseenter', () => {
        cursor.style.color = '#000000';
      });
      link.addEventListener('mouseleave', () => {
        cursor.style.color = '#ffffff';
      });
    });
  }

  // Start mit "datei"
  loadSection('datei');
</script>

</body>
</html>
