<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>DOS Bootscreen</title>
  <link href="https://fonts.cdnfonts.com/css/perfect-dos-vga-437" rel="stylesheet" />
  <link href="https://fonts.cdnfonts.com/css/ibm-plex-mono" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div id="bootscreen-text"></div>
  <div id="ladebalken">[                    ]</div>

  <script>
    const lines = [
      "American Megatrends Inc.",
      "AMIBIOS (C)1994 American Megatrends Inc.",
      "Keyboard detected"   
    ];

    let idx = 0;
    const bootscreenText = document.getElementById('bootscreen-text');
    const ladebalken = document.getElementById('ladebalken');

    function showNextLine() {
      if (idx < lines.length) {
        bootscreenText.textContent += lines[idx] + "\n";
        idx++;
        setTimeout(showNextLine, 500 + Math.random()*700); // unregelmäßige Abstände
      } else {
        startMemoryCount();
      }
    }

    function startMemoryCount() {
      // Hochzählen 1K bis 640K Base Memory
      let baseMem = 1;
      let extMem = 1;
      bootscreenText.textContent += "Base Memory: 1K\n";
      let baseInterval = setInterval(() => {
        baseMem++;
        bootscreenText.textContent = bootscreenText.textContent.replace(/Base Memory: \d+K/, "Base Memory: "+baseMem+"K");
        if (baseMem >= 640) {
          clearInterval(baseInterval);
          bootscreenText.textContent += "Extended Memory: 1K\n";
          extMemoryCount();
        }
      }, 5);
    }

    function extMemoryCount() {
      let extMem = 1;
      let extInterval = setInterval(() => {
        extMem++;
        bootscreenText.textContent = bootscreenText.textContent.replace(/Extended Memory: \d+K/, "Extended Memory: "+extMem+"K");
        if (extMem >= 384) {
          clearInterval(extInterval);
          startLoadingBar();
        }
      }, 5);
    }
    const lines = [
      "Keyboard detected",
      "Primary Master: ST-12345  20.0 GB",
    "Primary Slave: None",
    "Secondary Master: None",
    "Secondary Slave: None",
   "Starting OS"
    ];
    
    function startLoadingBar() {
      let count = 0;
      const max = 20;
      const interval = setInterval(() => {
        const blocks = '▒'.repeat(count) + ' '.repeat(max - count);
        ladebalken.textContent = '[' + blocks + ']';
        count++;
        if (count > max) {
          clearInterval(interval);
          // Nach Bootscreen: Weiterleitung auf Index
          window.location.href = "os.html";
        }
      }, 150);
    }

    showNextLine();
  </script>
</body>
</html>
